## CODE SNIPPET 1 AFTER CORRECTION ##
```python
# Handle outliers in training data by capping them instead of removing
try:
    train_df = detect_and_handle_outliers_iqr(
        data=train_df.copy(),  # Work on a copy to preserve original data
        columns=numerical_cols,
        factor=3.0,              # Increased factor to reduce sensitivity
        method='cap'             # Changed method from 'remove' to 'cap'
    )
    print(f"Training data shape after handling outliers: {train_df.shape}")
    
    # Optional: Log the number of values capped per column
    for col in numerical_cols:
        # Assuming 'detect_and_handle_outliers_iqr' returns the capped DataFrame
        # and does not provide counts, we can compare before and after
        original_max = train_df_original[col].max()
        original_min = train_df_original[col].min()
        capped_max = train_df[col].max()
        capped_min = train_df[col].min()
        
        if capped_max < original_max or capped_min > original_min:
            print(f"Outliers in '{col}' capped to [{capped_min}, {capped_max}].")
except Exception as e:
    print(f"Error handling outliers in training data: {e}")
    raise
```